# 数据库连接配置 - 使用MySQL
spring.profiles.active=mysql

# 禁用Redis自动配置
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration

# 服务器端口
server.port=8080

# JWT 配置
jwt.secret=mySecretKey123456789012345678901234567890
jwt.expiration=86400
jwt.refresh-expiration=604800

# Redis配置（可选，用于JWT黑名单和刷新token存储）
# spring.data.redis.host=localhost
# spring.data.redis.port=6379
# spring.data.redis.password=
# spring.data.redis.timeout=2000ms

# 监控配置
management.endpoints.web.exposure.include=health,info,metrics,prometheus,httptrace
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true
management.endpoint.httptrace.enabled=true
management.trace.http.include=request-headers,response-headers,cookies,errors

# 自定义健康检查
management.health.redis.enabled=true
management.health.db.enabled=true

# 日志配置
logging.level.root=INFO
logging.level.com.wzl.fitness=DEBUG
logging.level.com.wzl.fitness.service.AuthenticationService=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.authentication=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%X{traceId:-},%X{spanId:-}] %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%X{traceId:-},%X{spanId:-}] %logger{36} - %msg%n

# CORS 配置
spring.mvc.cors.allowed-origins=http://localhost:8081,http://localhost:8080,http://localhost:3000,http://localhost:3003
spring.mvc.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.mvc.cors.allowed-headers=*
spring.mvc.cors.allow-credentials=true

# 文件上传配置
file.upload-dir=uploads

# ==================== API响应压缩配置 ====================
# 启用Gzip压缩
server.compression.enabled=true
# 压缩的最小响应大小（字节），小于此值不压缩
server.compression.min-response-size=1024
# 需要压缩的MIME类型
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain,application/javascript,text/css

# ==================== Jackson JSON序列化优化配置 ====================
# 忽略null值，减少响应体积
spring.jackson.default-property-inclusion=non_null
# 日期格式化
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
# 时区设置
spring.jackson.time-zone=Asia/Shanghai
# 禁用空对象序列化失败
spring.jackson.serialization.fail-on-empty-beans=false
# 禁用未知属性反序列化失败
spring.jackson.deserialization.fail-on-unknown-properties=false
# 启用缩进输出（开发环境可读性好，生产环境可关闭）
spring.jackson.serialization.indent-output=false
